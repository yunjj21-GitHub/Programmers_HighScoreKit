// 프로그래머스 고득점 합격 Kit : 완전탐색_소수 찾기
#include <string>
#include <vector>
#include <algorithm>
#include <cmath>

using namespace std;

// 소수 판별 함수
bool isPrime(int n) {
	if (n < 2) return false;
	
	// 에라토스테네스의 체
	for (int i = 2; i <= sqrt(n); i++) {
		if (n%i == 0) return false;
	}
	return true;
}

int solution(string numbers) {
	int answer = 0;
	
	// 종이 조각의 각 수를 저장
	vector<char> piece;
	for (char tmp : numbers) {
		piece.push_back(tmp);
	}

	// 종이조각으로 만들수 있는 모든 수 구하기
	sort(piece.begin(), piece.end()); // 각 수를 오름차순 정렬
	vector<int> nums; // 종이조각으로 만들 수 있는 모든 수 저장
	do {
		string tmp = "";
		for (int i = 0; i < piece.size(); i++) {
			tmp += piece[i];
			nums.push_back(stoi(tmp));
		}
	
	} while (next_permutation(piece.begin(), piece.end()));

	// 중복값 지우기
	sort(nums.begin(), nums.end());
	nums.erase(unique(nums.begin(), nums.end()), nums.end());

	// 종이조각으로 가능한 모든 수 중에 소수의 개수 구하기
	for (int i = 0; i < nums.size(); i++) {
		if (isPrime(nums[i])) answer++;
	}

	return answer;
}